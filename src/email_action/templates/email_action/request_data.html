{% extends 'base.html' %}

{% load static %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}

{% block scripts %}
  <script src="{% static 'email_action/js/email_action.js' %}"></script>
{% endblock scripts %}

{% block title %}{{ block.super }}Email action{% endblock %}

{% block container %}
<div align="center" class="container" id="email-action-request-data">
  <h1 class="page-header">Send emails</h1>

  <div class="container" style="max-width: 500px;">
    {% if num_msgs > 0 %}
      <p>{{ num_msgs }} Emails will be sent.</p>

      <form action="" method="post">
        {% csrf_token %}

        {% include "includes/partial_form_char_field.html" with field=form.subject %}
        {% include "includes/partial_form_checkbox_field.html" with field=form.send_confirmation %}
        {% include "includes/partial_form_char_field.html" with field=form.email_column %}
        {% comment %}
        {% include "includes/partial_form_checkbox_field.html" with field=form.track_read %}
        {% include "includes/partial_form_checkbox_field.html" with field=form.track_column %}
        {% include "includes/partial_form_checkbox_field.html" with field=form.sent_column %}
        {% endcomment %}
        <div style="margin: 1ex 0 1ex 0;">
          <button type="button" class="btn btn-info js-email-preview"
                  style="margin-right:2ex;"
                  data-url="{% url 'email_action:preview' action.id %}?idx=1">
            <span class="glyphicon glyphicon-eye"></span> Preview
          </button>
          <button type="Submit" name="Submit" value="Send"
                  class="btn btn-success">Send</button>
        </div>
      </form>
    {% else %}
      <p>The action dos not apply to any data. <a href="{% url 'action:edit' action.id %}">Review the action filter</a></p>
    {% endif %}
  </div>

  <div class="modal fade" id="modal-item">
    <div class="modal-dialog">
      <div class="modal-content">
      </div>
    </div>
  </div>

</div>

{% endblock container %}
